<!doctype html><html lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.81.0"><link rel=canonical type=text/html href=https://kubecube-io.github.io/docs/developer-guide/><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>开发指南 | KubeCube</title><meta name=description content="开源容器平台"><meta property="og:title" content="开发指南"><meta property="og:description" content="开源容器平台"><meta property="og:type" content="website"><meta property="og:url" content="https://kubecube-io.github.io/docs/developer-guide/"><meta property="og:site_name" content="KubeCube"><meta itemprop=name content="开发指南"><meta itemprop=description content="开源容器平台"><meta name=twitter:card content="summary"><meta name=twitter:title content="开发指南"><meta name=twitter:description content="开源容器平台"><link rel=preload href=/scss/main.min.810b672b8acd789a78e1ee9e004e599d749572bd1fbb0d001f26f2e5c568c907.css as=style><link href=/scss/main.min.810b672b8acd789a78e1ee9e004e599d749572bd1fbb0d001f26f2e5c568c907.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg width="4984" height="1e3" viewBox="0 0 4984 1e3" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3551.54 432.823C3552.84 435.556 3555.59 437.298 3558.62 437.298H3658.46C3663.69 437.298 3667.45 432.277 3665.98 427.259 3634.56 319.831 3535.31 241.352 3417.7 241.352H3402.03c-142.85.0-258.65 115.801-258.65 258.648v31.352c0 142.847 115.8 258.648 258.65 258.648H3417.7c117.61.0 216.86-78.48 248.28-185.907C3667.45 599.075 3663.69 594.054 3658.46 594.054H3558.62C3555.59 594.054 3552.84 595.796 3551.54 598.529 3526.37 651.507 3472.39 688.108 3409.87 688.108 3323.29 688.108 3253.11 617.926 3253.11 531.352V5e2C3253.11 413.426 3323.29 343.243 3409.87 343.243c62.52.0 116.5 36.601 141.67 89.58z" fill="#333"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4970.89 651.516C4972.68 646.419 4968.9 641.081 4963.5 641.081H4867.67C4865.09 641.081 4862.68 642.35 4861.21 644.474 4842.85 671.15 4813.84 688.108 4781.45 688.108 4736.6 688.108 4698.03 655.443 4685.65 609.73h288.5C4978.15 609.73 4981.51 606.719 4981.95 602.744 4982.82 594.747 4983.27 586.616 4983.27 578.378c0-116.507-90-211.621-201.820000000001-211.621-111.83.0-201.83 95.114-201.83 211.621S4669.62 790 4781.45 790C4868.6 790 4942.57 732.144 4970.89 651.516zM4781.45 468.649C4819.59 468.649 4853.14 492.229 4869.98 527.433H4692.92C4709.75 492.229 4743.3 468.649 4781.45 468.649z" fill="#333"/><path d="M3727 386C3727 381.582 3730.58 378 3735 378h86C3825.42 378 3829 381.582 3829 386V612.5C3829 654.197 3862.8 688 3904.5 688s75.5-33.803 75.5-75.5V386C3980 381.582 3983.58 378 3988 378h86C4078.42 378 4082 381.582 4082 386V770C4082 774.418 4078.42 778 4074 778h-86C3983.58 778 3980 774.418 3980 770V764.6C3954.53 780.689 3924.35 790 3892 790 3800.87 790 3727 716.127 3727 625V386z" fill="#333"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3072.22 651.516C3074.01 646.419 3070.22 641.081 3064.82 641.081H2968.99C2966.42 641.081 2964 642.35 2962.54 644.474 2944.17 671.15 2915.17 688.108 2882.77 688.108 2837.92 688.108 2799.35 655.443 2786.97 609.73h288.51C3079.48 609.73 3082.84 606.719 3083.27 602.744 3084.15 594.747 3084.59 586.616 3084.59 578.378c0-116.507-90-211.621-201.82-211.621s-201.82 95.114-201.82 211.621S2770.95 790 2882.77 790C2969.93 790 3043.9 732.144 3072.22 651.516zM2882.77 468.649C2920.92 468.649 2954.47 492.229 2971.3 527.433H2794.24C2811.07 492.229 2844.62 468.649 2882.77 468.649z" fill="#333"/><path d="M1342 770.243C1342 774.661 1345.58 778.243 1350 778.243H1435.89c4.41999999999985.0 8-3.58200000000011 8-8V592.206L1495.37 540.725l196.9 234.656C1693.79 777.193 1696.04 778.239 1698.4 778.239h112.12C1817.32 778.239 1821.02 770.302 1816.65 765.096L1567.7 468.401l244.74-244.744C1817.48 218.617 1813.91 210 1806.78 210H1685.31C1683.19 210 1681.16 210.843 1679.66 212.343L1443.89 448.109V218C1443.89 213.582 1440.31 210 1435.89 210H1350C1345.58 210 1342 213.582 1342 218V770.243z" fill="#333"/><path d="M1828 386C1828 381.582 1831.58 378 1836 378h86C1926.42 378 1930 381.582 1930 386V612.5c0 41.697 33.8 75.5 75.5 75.5s75.5-33.803 75.5-75.5V386C2081 381.582 2084.58 378 2089 378h86C2179.42 378 2183 381.582 2183 386V770C2183 774.418 2179.42 778 2175 778h-86C2084.58 778 2081 774.418 2081 770V764.6C2055.53 780.689 2025.35 790 1993 790 1901.87 790 1828 716.127 1828 625V386z" fill="#333"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2254 210C2249.58 210 2246 213.582 2246 218V770C2246 774.418 2249.58 778 2254 778h86C2344.42 778 2348 774.418 2348 770V757.487C2378.39 778.082 2414.4 790 2453 790c108.8.0 197-94.692 197-211.5S2561.8 367 2453 367C2414.4 367 2378.39 378.918 2348 399.513V218C2348 213.582 2344.42 210 2340 210h-86zm94 368.5c0 60.475 44.77 109.5 1e2 109.5s1e2-49.025 1e2-109.5S2503.23 469 2448 469s-1e2 49.025-1e2 109.5z" fill="#333"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4153 210C4148.58 210 4145 213.582 4145 218V770C4145 774.418 4148.58 778 4153 778h86C4243.42 778 4247 774.418 4247 770V757.487C4277.39 778.082 4313.4 790 4352 790c108.8.0 197-94.692 197-211.5S4460.8 367 4352 367C4313.4 367 4277.39 378.918 4247 399.513V218C4247 213.582 4243.42 210 4239 210h-86zm94 368.5C4247 638.975 4291.77 688 4347 688s1e2-49.025 1e2-109.5S4402.23 469 4347 469s-1e2 49.025-1e2 109.5z" fill="#333"/><path d="M554.586 39C564.593 21.6667 552.084.0 532.069.0H346.41c-35.726.0-68.739 19.0599-86.602 50L28.8676 450C11.0043 480.94 11.0042 519.06 28.8675 550L259.808 950C277.671 980.94 310.684 1e3 346.41 1e3H447.276C456.208 1e3 464.461 995.235 468.927 987.5L612.399 739C622.406 721.667 609.897 7e2 589.882 7e2H427.239C412.949 7e2 399.743 692.376 392.598 680L300.222 520C293.077 507.624 293.077 492.376 300.222 480l85.964-148.894L386 330.999 554.586 39z" fill="#0056ff"/><path d="M564.401 3e2C544.386 3e2 531.877 278.333 541.884 261L685.356 12.5C689.822 4.76496 698.075.0 707.006.0H808.29C844.017.0 877.03 19.06 894.893 50.0001L1125.83 450C1143.7 480.94 1143.7 519.06 1125.83 550L894.893 950C877.03 980.94 844.017 1e3 808.29 1e3H622.214C602.199 1e3 589.69 978.333 599.697 961L750.385 7e2H750.555L854.478 520C861.624 507.624 861.624 492.376 854.478 480L762.102 320C754.957 307.624 741.752 3e2 727.461 3e2H564.401z" fill="#0056ff"/></svg></span><span class="text-uppercase font-weight-bold">KubeCube</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>文档</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>博客</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/kubecube-io/kubecube target=_blank><i class="fab fa-github"></i><span>GitHub</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/offline-search-index.d5a631f6a2fe4c00c21a0bc429b81434.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/docs/developer-guide/>返回本页常规视图</a>.</p></div><h1 class=title>开发指南</h1><ul><li>1: <a href=#pg-b07c2acd70ea534eec1eeb8eed0b4f85>OpenAPI使用指南</a></li><li>2: <a href=#pg-9ad7e56bcc725275dc9706e2f85e840a>自研接口文档</a></li><li>3: <a href=#pg-644345609da22c61e3a674258f71713e>参与贡献</a></li><li>4: <a href=#pg-1841a4f03855471e6ec8d83e4fe1ce99>如何调试</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-b07c2acd70ea534eec1eeb8eed0b4f85>1 - OpenAPI使用指南</h1><h3 id=1获取密钥>1、获取密钥</h3><p>登录KubeCube，在右上角的下拉菜单中找到【密钥管理】页面，可以在该页面管理您账户的访问密钥对。</p><p><img src=/imgs/developer-guide/openapi-guide/key-manage.png alt=key-manage></p><blockquote><p>若进入到该页面中无密钥则点击【添加密钥】按钮创建，最多可以创建5对密钥。</p></blockquote><h3 id=2根据密钥对生成-token>2、根据密钥对生成 token</h3><blockquote><p>token有效期默认1小时，可以在启动时修改配置。</p></blockquote><p>生成token的接口如下：</p><p>请求url</p><pre><code>/api/v1/cube/key/token?accessKey=&amp;secretKey=
</code></pre><p>Method：GET</p><p>描述：根据密钥对生成token，token有效期默认为1小时。</p><p>请求参数</p><table><thead><tr><th>参数名</th><th>说明</th><th>参数类型</th><th>是否必填</th></tr></thead><tbody><tr><td>accessKey</td><td>密钥对Ak</td><td>string</td><td>是</td></tr><tr><td>secretKey</td><td>密钥对Sk</td><td>string</td><td>是</td></tr></tbody></table><p>返回参数</p><table><thead><tr><th>参数名</th><th>说明</th><th>参数类型</th></tr></thead><tbody><tr><td>token</td><td>可以用于访问KubeCube OpenAPI的token</td><td>string</td></tr></tbody></table><p>请求示例</p><pre><code class=language-linux data-lang=linux>curl https://kubecube.com/api/v1/cube/key/token?accessKey=0ad66675488c4855a07113a8e65719e3&amp;secretKey=8f732a291795418f81cec6f1b064334a -X GET
</code></pre><p>返回示例</p><pre><code>{&quot;token&quot;:&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySW5mbyI6eyJ1c2VybmFtZSI6ImFkbWluIiwiZ3JvdXBzIjpbImt1YmVjdWJlIl19LCJleHAiOjE2MjQwMDMxMTJ9.DuR36vDDhLe_F5gw_T-8FCV7ZZVCJ1ye0dEpfELSa3g&quot;}
</code></pre><h3 id=3使用-token-访问-api>3、使用 token 访问 API</h3><p>在访问KubeCube openAPI时，在请求中加上请求头<code>Authorization:Bearer ${token}</code>以标识访问者的身份，其中${token}是第二步中获取到的token值，具体接口信息见下接口文档。</p><p><strong>请求示例</strong></p><pre><code>curl -X GET -H 'Authorization:Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySW5mbyI6eyJ1c2VybmFtZSI6ImFkbWluIiwiZ3JvdXBzIjpbImt1YmVjdWJlIl19LCJleHAiOjE2MjQwMDMxMTJ9.DuR36vDDhLe_F5gw_T-8FCV7ZZVCJ1ye0dEpfELSa3g' https://kubecube.com/api/v1/cube/proxy/clusters/pivot-cluster/api/v1/pods -k
</code></pre><p><strong>得到结果</strong></p><pre><code>{&quot;apiVersion&quot;:&quot;v1&quot;,&quot;code&quot;:404,&quot;details&quot;:{&quot;kind&quot;:&quot;pods&quot;,&quot;name&quot;:&quot;kubecube&quot;},&quot;kind&quot;:&quot;Status&quot;,&quot;message&quot;:&quot;pods \&quot;kubecube\&quot; not found&quot;,&quot;metadata&quot;:{},&quot;reason&quot;:&quot;NotFound&quot;,&quot;status&quot;:&quot;Failure&quot;}
</code></pre><h3 id=4接口文档>4、接口文档</h3><h4 id=访问-kubecube-自研接口>访问 KubeCube 自研接口</h4><p>点击【开发指南】-【自研接口文档】，该接口文档描述了 KubeCube 的自研接口。</p><h4 id=访问-kubernetes-资源>访问 Kubernetes 资源</h4><p>访问 Kubernetes 原生资源的接口文档如下：</p><p><strong>请求url</strong>：</p><pre><code>https://{管控节点IP}:30443/api/v1/cube/proxy/clusters/{clusterName}/*url?selector=&amp;pageSize=&amp;pageNum=&amp;sortName=&amp;sortOrder=sortFunc=
</code></pre><ul><li><p><code>*url</code>指的是直接调用 Kubernetes 时的接口，</p><p>接口文档为：https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#watch-pod-v1-core。</p></li><li><p>selector：查询条件，支持精准匹配和模糊匹配：</p><ul><li>精准匹配：eg. selector=key1=value1,key2=value2,key3=value3；</li><li>模糊匹配：eg. selector=key1~value1,key2~value2,key3~value3；</li><li>混合匹配：eg. selector=key1~value1,key2=value2,key3=value3；</li></ul></li><li><p>pageSize：查询结果每页的数量，默认值为10；</p></li><li><p>pageNum：查询结果的页数，默认为1；</p></li><li><p>sortName：查询结果排序依据的字段，默认为 &ldquo;metadata.name&rdquo;；</p></li><li><p>sortOrder：查询结果正序或倒序显示：正序为 &ldquo;asc&rdquo;，倒序为 &ldquo;desc&rdquo;，默认为正序；</p></li><li><p>sortFunc：sortName 的数据类型，默认为 &ldquo;string&rdquo;。</p></li></ul><p>返回参数同 Kubernetes 的返回参数。</p><p><strong>请求示例</strong></p><p>如果需要查询某个namespace下的 deployment 列表，并希望结果以 deployment 的创建时间倒序排序、以20条结果为1页，返回第2页的结果：</p><p>1、查询 Kubernetes 接口文档：查询 deployment 列表的接口为</p><pre><code>GET /apis/apps/v1/namespaces/{namespace}/deployments
</code></pre><p>2、因此， KubeCube 查询 deployment 的对应接口为</p><pre><code>GET /api/v1/cube/proxy/clusters/{clusterName}/apis/apps/v1/namespaces/{namespace}/deployments?sortName=CreationTimestamp&amp;sortOrder=desc&amp;pageSize=20&amp;pageNum=2
</code></pre><p>3、使用 token 访问则为：</p><pre><code class=language-linux data-lang=linux>curl -X GET -H 'Authorization:Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySW5mbyI6eyJ1c2VybmFtZSI6ImFkbWluIiwiZ3JvdXBzIjpbImt1YmVjdWJlIl19LCJleHAiOjE2MjQ2MTY3MjZ9.FCfuVzADMAgYeOm39Wlhs-3B6kW-Z6bZ9js1lKoNub0' https://kubecube.com/api/v1/cube/proxy/clusters/pivot-cluster/apis/apps/v1/namespaces/namespaceA/deployments?sortName=metadata.creationTimestamp&amp;sortOrder=desc&amp;pageSize=20&amp;pageNum=2 -k
</code></pre><h5 id=访问-crd-资源>访问 CRD 资源</h5><p>访问 CRD 资源的接口文档如下：</p><p><strong>请求url</strong>：</p><pre><code>https://{管控节点IP}:30443/api/v1/cube/proxy/clusters/{clusterName}/apis/{CRDGroup}/v1/{CRDKinds}/*url?selector=&amp;pageSize=&amp;pageNum=&amp;sortName=&amp;sortOrder=sortFunc=
</code></pre><p>参数含义同上。</p><p><strong>请求示例</strong></p><p>如果需要查询"pivot-cluster"集群里的租户列表，则对应接口为：</p><pre><code>GET /api/v1/cube/proxy/clusters/pivot-cluster/apis/tenant.kubecube.io/v1/tenants
</code></pre><p>使用 token 访问则为：</p><pre><code class=language-linux data-lang=linux>curl -X GET -H 'Authorization:Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySW5mbyI6eyJ1c2VybmFtZSI6ImFkbWluIiwiZ3JvdXBzIjpbImt1YmVjdWJlIl19LCJleHAiOjE2MjQ2MTY3MjZ9.FCfuVzADMAgYeOm39Wlhs-3B6kW-Z6bZ9js1lKoNub0' https://kubecube.com/api/v1/cube/proxy/clusters/pivot-cluster/apis/tenant.kubecube.io/v1/tenants -k
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-9ad7e56bcc725275dc9706e2f85e840a>2 - 自研接口文档</h1><div id=ohpen_swagger_ui></div><script>window.onload=function(){const a=SwaggerUIBundle({url:"/swagger.json",dom_id:'#ohpen_swagger_ui',presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=a}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-644345609da22c61e3a674258f71713e>3 - 参与贡献</h1><p>Welcome to KubeCube community! If you are looking for information on how to join us, you are in the right place. We encourage you to help out by reporting issues, improving documentation, fixing bugs, or adding new features. Every contribution is precious for KubeCube.</p><h2 id=reporting-issues>Reporting issues</h2><p>To be honest, we regard every user of KubeCube as a very kind contributor. After experiencing KubeCube, you may have some feedback for the project. Then feel free to open an issue.</p><p>There are lot of cases when you could open an issue:</p><ul><li>bug report</li><li>feature request</li><li>performance issues</li><li>feature proposal</li><li>feature design</li><li>help wanted</li><li>doc incomplete</li><li>test improvement</li><li>any questions on project</li><li>&mldr;</li></ul><p>Also we must remind that when filing a new issue, please remember to remove the sensitive data from your post. Sensitive data could be password, secret key, network locations, private business data and so on.</p><h2 id=contribution>Contribution</h2><p>To put forward a PR, we assume you have registered a GitHub ID. Then you could finish the preparation in the following steps:</p><ol><li>Fork the repository you wish to work on. You just need to click the button Fork in right-left of project repository main page. Then you will end up with your repository in your GitHub username.</li><li>Clone your own repository to develop locally. Use git clone <a href=https://github.com/>https://github.com/</a><your-username>/<project>.git to clone repository to your local machine. Then you can create new branches to finish the change you wish to make.</li><li>Set remote upstream to be <a href=https://github.com/kubecube-io/>https://github.com/kubecube-io/</a><project>.git using the following two commands:</li></ol><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git remote add upstream https://github.com/kubecube-io/&lt;project&gt;.git
git remote set-url --push upstream no-pushing
</code></pre></div><p>Adding this, we can easily synchronize local branches with upstream branches.</p><ol start=4><li><strong>Create a branch</strong> to add a new feature or fix issues</li></ol><p>Update local working directory:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87>cd</span> &lt;project&gt;
git fetch upstream
git checkout master
git rebase upstream/master
</code></pre></div><p>Create a new branch:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git checkout -b &lt;new-branch&gt;
</code></pre></div><p>Make any change on the new-branch then build and test your codes.</p><h3 id=pr-description>PR Description</h3><p>PR is the only way to make changes to KubeCube project files. To help reviewers better get your purpose, PR description could not be too detailed. We encourage contributors to follow the <a href=https://github.com/kubecube-io/kubecube/blob/main/.github/PULL_REQUEST_TEMPLATE.md>PR template</a> to finish the pull request.</p><h3 id=developing-environment>Developing Environment</h3><p>As a contributor, if you want to make any contribution to KubeCube project, we should reach an agreement on the version of tools used in the development environment. Here are some dependents with specific version:</p><p>Golang : v1.14+ (1.16 is best)
Kubernetes: v1.18+</p><h3 id=developing-guide>Developing guide</h3><p>There&rsquo;s a <code>Makefile</code> in the root folder which describes the options to build and install. Here are some common ones:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># Run the tests</span>
make <span style=color:#204a87>test</span>

<span style=color:#8f5902;font-style:italic># Swag doc generate</span>
make swag-gen

<span style=color:#8f5902;font-style:italic># Cube binary build</span>
make docker-build-cube

<span style=color:#8f5902;font-style:italic># Warden binary build</span>
make docker-build-warden

<span style=color:#8f5902;font-style:italic># Install dependence into env</span>
make install
</code></pre></div><p>If you want to start KubeCube and Warden locally to work with a Kubernetes cluster, you should follow the <a href=https://www.kubecube.io/docs/developer-guide/debug/>debug guide</a>.</p><h2 id=join-kubecube-as-a-member>Join KubeCube as a member</h2><p>It is also welcomed to join KubeCube team if you are willing to participate in KubeCube community continuously and keep active.</p><h3 id=requirements>Requirements</h3><ul><li>Have read the <a href=https://www.kubecube.io/docs/developer-guide/contributing/>Contributing to KubeCube</a> carefully</li><li>Have submitted multi PRs to the community</li><li>Be active in the community, may including but not limited<ul><li>Submitting or commenting on issues</li><li>Contributing PRs to the community</li><li>Reviewing PRs in the community</li></ul></li></ul><h3 id=how-to-do-it>How to do it</h3><p>You can try in either of two ways:</p><ul><li><p>Report a issues</p></li><li><p>Submit a PR in the project repo</p></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-1841a4f03855471e6ec8d83e4fe1ce99>4 - 如何调试</h1><h2 id=如何进行本地调试>如何进行本地调试</h2><p><strong>安装 docker</strong></p><p>参照 <a href=https://docs.docker.com/install/>official docker installation guide</a>.</p><p><strong>安装 minikube</strong></p><p>参照 <a href=https://kubernetes.io/docs/tasks/tools/install-minikube/>official minikube installation guide</a>.</p><p><strong>使用 kubeadm 创建集群</strong></p><p>参照 <a href=https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/>official creating a cluster with kubeadm</a></p><h3 id=本地调试>本地调试</h3><p>安装 manifests 依赖</p><p>⚠️ K8S_API_SERVER_ENDPOINT 为 k8s 的 api-server 地址，请根据环境填入对应的地址</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>K8S_API_SERVER_ENDPOINT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;0.0.0.0:6443&#34;</span>
bash hack/install_local.sh <span style=color:#4e9a06>${</span><span style=color:#000>K8S_API_SERVER_ENDPOINT</span><span style=color:#4e9a06>}</span>
</code></pre></div><p>调试 kubecube</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>make run-cube
</code></pre></div><p>调试 warden</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>make run-warden
</code></pre></div><p>卸载 manifests 依赖</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>bash hack/uninstall_local.sh
</code></pre></div><h3 id=使用-pod-进行调试>使用 pod 进行调试</h3><p>请参照 <a href=https://www.kubecube.io/docs/quick-start/installation/#all-in-one-%E9%83%A8%E7%BD%B2>all in one 部署</a> 进行 kubecube 安装</p><p>构建 kubecube 镜像</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>make docker-build-cube <span style=color:#000>IMG</span><span style=color:#ce5c00;font-weight:700>={</span>image-tag<span style=color:#ce5c00;font-weight:700>}</span>
</code></pre></div><p>构建 warden 镜像</p><pre><code>make docker-build-wardeb IMG={image-tag}
</code></pre><p>使用构建完成的镜像替换对应 deployment 中的镜像，并使用 <code>kubectl logs</code> 进行 debug</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/kubecube-io/kubecube aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 KubeCube Project Authors All Rights Reserved</small>
<small class=ml-1><a href=http://www.apache.org/licenses/LICENSE-2.0 target=_blank rel=noopener>隐私政策</a></small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js integrity="sha256-OxcsE7YsK+qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin=anonymous></script></body></html>